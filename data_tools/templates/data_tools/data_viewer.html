{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="bg-white shadow-md rounded-lg p-6">
        <h3 class="text-2xl font-bold text-gray-800">Visor de Datos: {{ datasource.name }}</h3>
        <p class="mb-4 text-muted">Mostrando las primeras 100 filas de <strong>{{ datasource.filename }}</strong></p>

        <div id="error-container" class="alert alert-danger d-none" role="alert"></div>

        <div id="loading-spinner" class="text-center my-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2">Cargando datos...</p>
        </div>

        <div id="table-wrapper" class="hidden">
            <table id="data-table" class="display" style="width:100%">
                </table>
        </div>
    </div>
</div>

{# Pasamos la URL de la API a nuestro script de JavaScript #}
<script id="data-viewer-script-data" type="application/json">
    {
        "dataSourceUrl": "{% url 'data_tools:get_datasource_json' pk=datasource.pk %}"
    }
</script>
{% endblock %}

{% block extra_js %}
    {# Cargamos nuestro archivo JS específico para esta página #}
    <script src="{% static 'data_tools/js/data_viewer.js' %}"></script>
{% endblock %}