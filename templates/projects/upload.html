{% extends 'base.html' %}

{% block title %}Carga de Datos{% endblock %}

{% block content %}
    <h1>Carga de Datasets</h1>
    <p>Selecciona un archivo de datos (CSV o Excel) para iniciar un nuevo proyecto o añadirlo a uno existente.</p>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="documento" required>
        <button type="submit">Procesar Archivo</button>
    </form>

    {% if results %}
        <hr>
        <h2>Resultados del Análisis Preliminar</h2>

        {% if results.error %}
            <p style="color: red;"><strong>Error:</strong> {{ results.error }}</p>
        {% else %}
            <p><strong>Archivo Procesado:</strong> {{ results.file_name }}</p>
            <p><strong>Número de Filas:</strong> {{ results.num_rows }}</p>
            <p><strong>Número de Columnas:</strong> {{ results.num_cols }}</p>
            <p><strong>Nombres de Columnas:</strong> {{ results.columns|join:", " }}</p>

            <h3>Primeras 5 Filas de Datos:</h3>
            {{ results.data_head|safe }}
        {% endif %}
    {% endif %}
{% endblock %}