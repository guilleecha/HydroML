/**
 * Grove Navigation System - Complete Navigation Component Library
 * Consolidated navigation components for Grove Design System
 * Part of HydroML Grove Component Library
 * 
 * Features:
 * - Navigation bars and headers (single/two-row)
 * - Breadcrumb navigation with HydroML extensions
 * - Tab navigation with responsive design
 * - Menu items and dropdown navigation
 * - Sidebar navigation with collapsible sections
 * - Pagination navigation
 * - Mobile navigation patterns
 * - Active states and indicators
 * - Accessibility support with focus indicators
 * - Dark mode variants
 * - Performance optimizations
 */

/* ===== CSS VARIABLES & DESIGN TOKENS ===== */

:root {
  /* Grove headbar height calculations for layout integration */
  --grove-headbar-primary-height: 4rem;    /* 64px - primary row height */
  --grove-headbar-secondary-height: 3rem;  /* 48px - secondary row height */
  --grove-headbar-total-height: 7rem;      /* 112px - combined height for two-row layout */
  --grove-headbar-single-height: 4rem;     /* 64px - fallback for single-row compatibility */
  
  /* Content offset variables for layout calculations */
  --grove-content-offset-two-row: calc(100vh - var(--grove-headbar-total-height));
  --grove-content-offset-single-row: calc(100vh - var(--grove-headbar-single-height));
  
  /* Z-index variables for proper layering */
  --z-index-header: 50;
  --z-index-dropdown: 100;
}

/* ===== NAVIGATION BAR SYSTEM ===== */

.grove-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    background-color: var(--grove-bg-primary);
    border-bottom: 1px solid var(--grove-border-primary);
}

.grove-nav__brand {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--grove-text-primary);
    text-decoration: none;
}

.grove-nav__brand:hover {
    color: var(--grove-brand-primary);
}

.grove-nav__menu {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    list-style: none;
    margin: 0;
    padding: 0;
}

.grove-nav__item {
    position: relative;
}

.grove-nav__link {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    color: var(--grove-text-secondary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    transition-property: color, background-color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-nav__link:hover {
    color: var(--grove-text-primary);
    background-color: var(--grove-bg-secondary);
}

.grove-nav__link--active {
    color: var(--grove-brand-primary);
    background-color: var(--grove-brand-primary-subtle);
}

.grove-nav__link:focus-visible {
    outline: 2px solid var(--grove-brand-primary);
    outline-offset: 2px;
}

/* Navigation Icons */
.grove-nav__icon {
    width: var(--space-4);
    height: var(--space-4);
    flex-shrink: 0;
}

/* Navigation Badge */
.grove-nav__badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: var(--space-5);
    height: var(--space-5);
    padding: 0 var(--space-1-5);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background-color: var(--grove-gray-400);
    color: var(--grove-white);
}

.grove-nav__link--active .grove-nav__badge {
    background-color: var(--grove-brand-primary);
}

/* ===== TWO-ROW HEADBAR SYSTEM ===== */

.grove-headbar {
  display: flex;
  flex-direction: column;
  position: sticky;
  top: 0;
  z-index: var(--z-index-header);
  background: none;
  border-bottom: none;
}

/* Primary Row (Breadcrumbs & User Context) */
.grove-headbar__primary-row {
  background-color: var(--grove-bg-secondary);
  color: var(--grove-text-primary);
  border-bottom: 1px solid var(--grove-border-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-4);
  min-height: var(--space-16); /* 64px */
  transition: var(--transition-colors);
}

/* Secondary Row (Main Navigation) */
.grove-headbar__secondary-row {
  background-color: var(--grove-bg-primary);
  color: var(--grove-text-primary);
  border-bottom: 1px solid var(--grove-border-primary);
  display: flex;
  align-items: center;
  padding: 0 var(--space-4);
  min-height: var(--space-12); /* 48px */
  transition: var(--transition-colors);
}

/* Primary Row Layout */
.grove-headbar__primary-left {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  flex: 1;
}

.grove-headbar__primary-right {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

/* Logo in primary row */
.grove-headbar__primary-logo {
  display: flex;
  align-items: center;
  text-decoration: none;
  color: var(--grove-text-primary);
  font-weight: var(--font-weight-semibold);
  transition: var(--transition-colors);
}

.grove-headbar__primary-logo:hover {
  color: var(--grove-brand-primary);
}

.grove-headbar__primary-logo img {
  height: var(--space-12); /* 48px */
  width: var(--space-12); /* 48px */
  margin-right: var(--space-2);
}

/* Secondary Row Navigation */
.grove-headbar__nav {
  display: flex;
  align-items: center;
  gap: var(--space-8);
  height: 100%;
}

.grove-headbar__nav-item {
  position: relative;
  display: flex;
  align-items: center;
  padding: var(--space-3) 0;
  color: var(--grove-text-secondary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  border-bottom: 2px solid transparent;
  transition: var(--transition-colors);
  cursor: pointer;
}

.grove-headbar__nav-item:hover {
  color: var(--grove-text-primary);
  border-bottom-color: var(--grove-border-secondary);
}

.grove-headbar__nav-item--active {
  color: var(--grove-text-primary);
  border-bottom-color: var(--color-amber-600); /* Amber for active state */
}

/* ===== BREADCRUMB NAVIGATION ===== */

.grove-breadcrumb {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) 0;
    font-size: var(--font-size-sm);
}

.grove-breadcrumb__list {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    list-style: none;
    margin: 0;
    padding: 0;
}

.grove-breadcrumb__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.grove-breadcrumb__link {
    color: var(--grove-text-tertiary);
    text-decoration: none;
    transition-property: color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-breadcrumb__link:hover {
    color: var(--grove-brand-primary);
    text-decoration: underline;
}

.grove-breadcrumb__link:focus-visible {
    outline: 2px solid var(--grove-brand-primary);
    outline-offset: 1px;
    border-radius: var(--radius-sm);
}

.grove-breadcrumb__separator {
    color: var(--grove-text-disabled);
    font-size: var(--font-size-xs);
}

.grove-breadcrumb__current {
    color: var(--grove-text-primary);
    font-weight: var(--font-weight-medium);
}

/* Breadcrumb Icons */
.grove-breadcrumb__icon {
    width: var(--space-3);
    height: var(--space-3);
    flex-shrink: 0;
}

/* Enhanced Breadcrumb Navigation for Headbar */
.grove-headbar__breadcrumbs {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--font-size-sm);
  font-family: var(--font-family-sans);
  line-height: var(--line-height-snug);
}

.grove-headbar__breadcrumb-part {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  color: var(--grove-text-secondary);
  transition: var(--transition-colors);
}

.grove-headbar__breadcrumb-char {
  color: var(--grove-text-tertiary);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  text-decoration: none;
  transition: var(--transition-colors);
  cursor: pointer;
}

.grove-headbar__breadcrumb-char:hover {
  color: var(--grove-brand-primary);
}

.grove-headbar__breadcrumb-user {
  color: var(--grove-text-primary);
  font-weight: var(--font-weight-semibold);
  text-decoration: none;
  transition: var(--transition-colors);
}

.grove-headbar__breadcrumb-user:hover {
  color: var(--grove-brand-primary);
}

.grove-headbar__breadcrumb-section {
  color: var(--grove-text-secondary);
  font-weight: var(--font-weight-normal);
  text-decoration: none;
  transition: var(--transition-colors);
}

.grove-headbar__breadcrumb-section:hover {
  color: var(--grove-text-primary);
}

.grove-headbar__breadcrumb-separator {
  color: var(--grove-text-quaternary);
  font-size: var(--font-size-xs);
  margin: 0 var(--space-1);
}

/* ===== TAB NAVIGATION ===== */

.grove-tabs {
    border-bottom: 1px solid var(--grove-border-primary);
}

.grove-tabs__list {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    list-style: none;
    margin: 0;
    padding: 0;
}

.grove-tabs__tab {
    position: relative;
    padding: var(--space-3) var(--space-4);
    border-bottom: 2px solid transparent;
    color: var(--grove-text-secondary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition-property: color, border-color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-tabs__tab:hover {
    color: var(--grove-text-primary);
    border-bottom-color: var(--grove-border-secondary);
}

.grove-tabs__tab--active {
    color: var(--grove-brand-primary);
    border-bottom-color: var(--grove-brand-primary);
}

.grove-tabs__tab:focus-visible {
    outline: 2px solid var(--grove-brand-primary);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
}

.grove-tabs__tab:disabled,
.grove-tabs__tab[aria-disabled="true"] {
    color: var(--grove-text-disabled);
    cursor: not-allowed;
    pointer-events: none;
}

/* Tab Badge */
.grove-tabs__badge {
    margin-left: var(--space-1-5);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: var(--space-4);
    height: var(--space-4);
    padding: 0 var(--space-1);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background-color: var(--grove-gray-200);
    color: var(--grove-text-secondary);
}

.grove-tabs__tab--active .grove-tabs__badge {
    background-color: var(--grove-brand-primary-subtle);
    color: var(--grove-brand-primary);
}

/* ===== MENU NAVIGATION ===== */

.grove-menu {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    padding: var(--space-2);
    background-color: var(--grove-bg-primary);
    border: 1px solid var(--grove-border-primary);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
}

.grove-menu__item {
    list-style: none;
}

.grove-menu__link {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-sm);
    color: var(--grove-text-primary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    cursor: pointer;
    transition-property: background-color, color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-menu__link:hover {
    background-color: var(--grove-bg-secondary);
}

.grove-menu__link--active {
    background-color: var(--grove-brand-primary-subtle);
    color: var(--grove-brand-primary);
}

.grove-menu__link:focus-visible {
    outline: 2px solid var(--grove-brand-primary);
    outline-offset: 1px;
}

.grove-menu__link:disabled,
.grove-menu__link[aria-disabled="true"] {
    color: var(--grove-text-disabled);
    cursor: not-allowed;
    opacity: 0.5;
}

.grove-menu__icon {
    width: var(--space-4);
    height: var(--space-4);
    flex-shrink: 0;
}

.grove-menu__text {
    flex: 1;
}

.grove-menu__shortcut {
    font-size: var(--font-size-xs);
    color: var(--grove-text-tertiary);
    font-weight: var(--font-weight-normal);
}

.grove-menu__divider {
    height: 1px;
    background-color: var(--grove-border-primary);
    margin: var(--space-2) 0;
}

/* Menu Group */
.grove-menu__group {
    padding: var(--space-2) 0;
}

.grove-menu__group:not(:first-child) {
    border-top: 1px solid var(--grove-border-primary);
}

.grove-menu__group-label {
    padding: var(--space-1) var(--space-3);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--grove-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* ===== SIDEBAR NAVIGATION ===== */

.grove-sidebar {
    display: flex;
    flex-direction: column;
    width: 240px;
    min-height: 100vh;
    background-color: var(--grove-bg-primary);
    border-right: 1px solid var(--grove-border-primary);
}

.grove-sidebar__header {
    padding: var(--space-4);
    border-bottom: 1px solid var(--grove-border-primary);
}

.grove-sidebar__content {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4);
}

.grove-sidebar__nav {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.grove-sidebar__nav-item {
    list-style: none;
}

.grove-sidebar__nav-link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2-5) var(--space-3);
    border-radius: var(--radius-md);
    color: var(--grove-text-secondary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    transition-property: background-color, color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-sidebar__nav-link:hover {
    background-color: var(--grove-bg-secondary);
    color: var(--grove-text-primary);
}

.grove-sidebar__nav-link--active {
    background-color: var(--grove-brand-primary-subtle);
    color: var(--grove-brand-primary);
}

.grove-sidebar__nav-icon {
    width: var(--space-5);
    height: var(--space-5);
    flex-shrink: 0;
}

.grove-sidebar__nav-text {
    flex: 1;
}

.grove-sidebar__nav-badge {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: var(--space-5);
    height: var(--space-5);
    padding: 0 var(--space-1-5);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background-color: var(--grove-gray-200);
    color: var(--grove-text-secondary);
}

.grove-sidebar__nav-link--active .grove-sidebar__nav-badge {
    background-color: var(--grove-brand-primary);
    color: var(--grove-white);
}

/* Sidebar Sections */
.grove-sidebar__section {
    margin-bottom: var(--space-6);
}

.grove-sidebar__section-title {
    padding: var(--space-2) var(--space-3);
    margin-bottom: var(--space-2);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--grove-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Collapsible Sidebar */
.grove-sidebar--collapsed {
    width: 64px;
}

.grove-sidebar--collapsed .grove-sidebar__nav-text,
.grove-sidebar--collapsed .grove-sidebar__nav-badge,
.grove-sidebar--collapsed .grove-sidebar__section-title {
    display: none;
}

.grove-sidebar--collapsed .grove-sidebar__nav-link {
    justify-content: center;
    padding: var(--space-3);
}

/* ===== NAVIGATION SECTIONS ===== */

.grove-nav-section {
    border-bottom: 1px solid var(--grove-gray-200);
}

.grove-nav-section:last-child {
    border-bottom: none;
}

.grove-nav-section__header {
    width: 100%;
    display: flex;
    align-items: center;
    padding: var(--space-3) var(--space-4);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--grove-gray-700);
    background-color: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out);
}

.grove-nav-section__header:hover {
    background-color: var(--grove-gray-50);
    color: var(--grove-gray-900);
}

.grove-nav-section__icon {
    width: var(--space-5);
    height: var(--space-5);
    margin-right: var(--space-3);
    flex-shrink: 0;
}

.grove-nav-section__chevron {
    width: var(--space-4);
    height: var(--space-4);
    margin-left: auto;
    transition: transform var(--duration-fast) var(--ease-out);
}

.grove-nav-section__chevron--expanded {
    transform: rotate(90deg);
}

.grove-nav-section__content {
    background-color: var(--grove-gray-25);
    border-top: 1px solid var(--grove-gray-100);
}

/* Navigation Items within Sections */
.grove-nav-item {
    width: 100%;
    display: flex;
    align-items: center;
    padding: var(--space-3) var(--space-6);
    font-size: var(--font-size-sm);
    color: var(--grove-gray-600);
    background-color: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out);
    text-decoration: none;
}

.grove-nav-item:hover {
    background-color: var(--grove-blue-50);
    color: var(--grove-blue-700);
}

.grove-nav-item--active {
    background-color: var(--grove-blue-100);
    color: var(--grove-blue-800);
    font-weight: var(--font-weight-medium);
}

.grove-nav-item__icon {
    width: var(--space-4);
    height: var(--space-4);
    margin-right: var(--space-3);
    flex-shrink: 0;
}

.grove-nav-item__badge {
    margin-left: auto;
    padding: var(--space-1) var(--space-2);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--grove-gray-600);
    background-color: var(--grove-gray-200);
    border-radius: var(--radius-full);
}

/* ===== PAGINATION NAVIGATION ===== */

.grove-pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-4) 0;
}

.grove-pagination__item {
    list-style: none;
}

.grove-pagination__link {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: var(--space-10);
    height: var(--space-10);
    padding: var(--space-2);
    border: 1px solid var(--grove-border-primary);
    border-radius: var(--radius-md);
    color: var(--grove-text-primary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition-property: background-color, border-color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-pagination__link:hover:not([aria-disabled="true"]) {
    background-color: var(--grove-bg-secondary);
    border-color: var(--grove-border-secondary);
}

.grove-pagination__link--active {
    background-color: var(--grove-brand-primary);
    border-color: var(--grove-brand-primary);
    color: var(--grove-white);
}

.grove-pagination__link:focus-visible {
    outline: 2px solid var(--grove-brand-primary);
    outline-offset: 2px;
}

.grove-pagination__link[aria-disabled="true"] {
    color: var(--grove-text-disabled);
    border-color: var(--grove-border-primary);
    cursor: not-allowed;
    opacity: 0.5;
}

.grove-pagination__dots {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: var(--space-10);
    height: var(--space-10);
    color: var(--grove-text-tertiary);
    font-size: var(--font-size-sm);
}

/* ===== MOBILE NAVIGATION ===== */

.grove-mobile-nav {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--grove-bg-primary);
    z-index: var(--z-index-modal);
}

.grove-mobile-nav--open {
    display: flex;
    flex-direction: column;
}

.grove-mobile-nav__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4);
    border-bottom: 1px solid var(--grove-border-primary);
}

.grove-mobile-nav__close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--space-10);
    height: var(--space-10);
    border: none;
    border-radius: var(--radius-md);
    background: none;
    color: var(--grove-text-secondary);
    cursor: pointer;
}

.grove-mobile-nav__close:hover {
    background-color: var(--grove-bg-secondary);
    color: var(--grove-text-primary);
}

.grove-mobile-nav__content {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4);
}

.grove-mobile-nav__nav {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.grove-mobile-nav__link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    border-radius: var(--radius-md);
    color: var(--grove-text-primary);
    text-decoration: none;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    transition-property: background-color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.grove-mobile-nav__link:hover {
    background-color: var(--grove-bg-secondary);
}

.grove-mobile-nav__link--active {
    background-color: var(--grove-brand-primary-subtle);
    color: var(--grove-brand-primary);
}

/* ===== COUNT BADGES SYSTEM ===== */

.grove-headbar__count-badge {
  background-color: var(--grove-bg-tertiary);
  color: var(--grove-text-secondary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  padding: var(--space-0-5) var(--space-2);
  border-radius: var(--radius-full);
  margin-left: var(--space-2);
  min-width: var(--space-5);
  text-align: center;
  transition: var(--transition-colors), var(--transition-transform);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.grove-headbar__nav-item:hover .grove-headbar__count-badge {
  background-color: var(--grove-brand-primary);
  color: var(--grove-text-inverse);
  transform: scale(1.05);
}

.grove-headbar__nav-item--active .grove-headbar__count-badge {
  background-color: var(--grove-brand-primary);
  color: var(--grove-text-inverse);
}

.grove-headbar__count-badge--zero {
  display: none;
}

/* ===== HYDROML-SPECIFIC EXTENSIONS ===== */

/* HydroML Breadcrumb States */
.breadcrumb-active {
    color: var(--grove-brand-primary);
    font-weight: var(--font-weight-semibold);
    background-color: var(--grove-brand-primary-subtle);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    border: 1px solid var(--grove-border-secondary);
    box-shadow: var(--shadow-sm);
}

.breadcrumb-inactive {
    color: var(--grove-text-secondary);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    transition: all var(--duration-fast) var(--ease-out);
}

.breadcrumb-inactive:hover {
    color: var(--grove-text-primary);
    background-color: var(--grove-bg-secondary);
}

/* HydroML Headbar Navigation Classes */
.headbar-nav-link {
    display: flex;
    align-items: center;
    padding: 0 var(--space-4);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    border-bottom: 2px solid transparent;
    height: var(--space-12);
    transition-property: color, border-color;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
}

.headbar-nav-link-active {
    border-bottom-color: var(--color-amber-600);
    color: var(--grove-text-primary);
}

.headbar-nav-link-inactive {
    border-bottom-color: transparent;
    color: var(--grove-text-secondary);
}

.headbar-nav-link-inactive:hover {
    color: var(--grove-text-primary);
}

.nav-count-badge {
    margin-left: var(--space-2);
    font-size: var(--font-size-xs);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-medium);
    background-color: var(--grove-gray-400);
    color: var(--grove-white);
}

.headbar-nav-icon {
    width: var(--space-5);
    height: var(--space-5);
    margin-right: var(--space-2);
    flex-shrink: 0;
}

/* Active State Indicators */
.grove-active-indicator {
    width: var(--space-2);
    height: var(--space-2);
    background-color: var(--grove-brand-primary);
    border-radius: var(--radius-full);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.grove-active-indicator--static {
    width: var(--space-2);
    height: var(--space-2);
    background-color: var(--grove-brand-primary);
    border-radius: var(--radius-full);
}

/* ===== DARK MODE SUPPORT ===== */

.dark .grove-nav {
    background-color: var(--grove-bg-primary-dark);
    border-bottom-color: var(--grove-border-primary-dark);
}

.dark .grove-nav__brand {
    color: var(--grove-text-primary-dark);
}

.dark .grove-nav__brand:hover {
    color: var(--grove-brand-primary-dark);
}

.dark .grove-nav__link {
    color: var(--grove-text-secondary-dark);
}

.dark .grove-nav__link:hover {
    color: var(--grove-text-primary-dark);
    background-color: var(--grove-bg-secondary-dark);
}

.dark .grove-nav__link--active {
    color: var(--grove-brand-primary-dark);
    background-color: var(--grove-brand-primary-subtle-dark);
}

.dark .grove-breadcrumb__link {
    color: var(--grove-text-tertiary-dark);
}

.dark .grove-breadcrumb__link:hover {
    color: var(--grove-brand-primary-dark);
}

.dark .grove-breadcrumb__current {
    color: var(--grove-text-primary-dark);
}

.dark .grove-tabs {
    border-bottom-color: var(--grove-border-primary-dark);
}

.dark .grove-tabs__tab {
    color: var(--grove-text-secondary-dark);
}

.dark .grove-tabs__tab:hover {
    color: var(--grove-text-primary-dark);
    border-bottom-color: var(--grove-border-secondary-dark);
}

.dark .grove-tabs__tab--active {
    color: var(--grove-brand-primary-dark);
    border-bottom-color: var(--grove-brand-primary-dark);
}

.dark .grove-menu {
    background-color: var(--grove-bg-primary-dark);
    border-color: var(--grove-border-primary-dark);
}

.dark .grove-menu__link {
    color: var(--grove-text-primary-dark);
}

.dark .grove-menu__link:hover {
    background-color: var(--grove-bg-secondary-dark);
}

.dark .grove-menu__link--active {
    background-color: var(--grove-brand-primary-subtle-dark);
    color: var(--grove-brand-primary-dark);
}

.dark .grove-sidebar {
    background-color: var(--grove-bg-primary-dark);
    border-right-color: var(--grove-border-primary-dark);
}

.dark .grove-sidebar__nav-link {
    color: var(--grove-text-secondary-dark);
}

.dark .grove-sidebar__nav-link:hover {
    background-color: var(--grove-bg-secondary-dark);
    color: var(--grove-text-primary-dark);
}

.dark .grove-sidebar__nav-link--active {
    background-color: var(--grove-brand-primary-subtle-dark);
    color: var(--grove-brand-primary-dark);
}

.dark .grove-pagination__link {
    border-color: var(--grove-border-primary-dark);
    color: var(--grove-text-primary-dark);
}

.dark .grove-pagination__link:hover:not([aria-disabled="true"]) {
    background-color: var(--grove-bg-secondary-dark);
    border-color: var(--grove-border-secondary-dark);
}

.dark .grove-pagination__link--active {
    background-color: var(--grove-brand-primary-dark);
    border-color: var(--grove-brand-primary-dark);
}

.dark .grove-nav-section {
    border-bottom-color: var(--grove-gray-700);
}

.dark .grove-nav-section__header {
    color: var(--grove-gray-300);
}

.dark .grove-nav-section__header:hover {
    background-color: var(--grove-gray-800);
    color: var(--grove-gray-100);
}

.dark .grove-nav-section__content {
    background-color: var(--grove-gray-850);
    border-top-color: var(--grove-gray-800);
}

.dark .grove-nav-item {
    color: var(--grove-gray-400);
}

.dark .grove-nav-item:hover {
    background-color: var(--grove-blue-900);
    color: var(--grove-blue-200);
}

.dark .grove-nav-item--active {
    background-color: var(--grove-blue-800);
    color: var(--grove-blue-100);
}

.dark .grove-nav-item__badge {
    color: var(--grove-gray-300);
    background-color: var(--grove-gray-700);
}

.dark .breadcrumb-active {
    background-color: var(--grove-brand-primary-subtle-dark);
    color: var(--grove-brand-primary-dark);
    border-color: var(--grove-border-secondary-dark);
}

.dark .breadcrumb-inactive {
    color: var(--grove-text-secondary-dark);
}

.dark .breadcrumb-inactive:hover {
    color: var(--grove-text-primary-dark);
    background-color: var(--grove-bg-secondary-dark);
}

.dark .headbar-nav-link-active {
    color: var(--grove-text-primary-dark);
}

.dark .headbar-nav-link-inactive {
    color: var(--grove-text-secondary-dark);
}

.dark .headbar-nav-link-inactive:hover {
    color: var(--grove-text-primary-dark);
}

/* ===== RESPONSIVE DESIGN ===== */

@media (max-width: 768px) {
    .grove-nav__menu {
        display: none;
    }
    
    .grove-sidebar {
        transform: translateX(-100%);
        position: fixed;
        z-index: var(--z-index-modal);
        transition: transform var(--duration-normal) var(--ease-out);
    }
    
    .grove-sidebar--open {
        transform: translateX(0);
    }
    
    .grove-tabs__list {
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    
    .grove-tabs__list::-webkit-scrollbar {
        display: none;
    }
    
    .grove-pagination {
        gap: var(--space-0-5);
    }
    
    .grove-pagination__link {
        min-width: var(--space-8);
        height: var(--space-8);
        font-size: var(--font-size-xs);
    }
    
    /* Primary row mobile adjustments */
    .grove-headbar__primary-row {
        padding: var(--space-2) var(--space-4);
        min-height: var(--space-12);
    }
    
    /* Hide secondary row on mobile by default */
    .grove-headbar__secondary-row {
        display: none;
    }
    
    /* Show secondary row as mobile menu when opened */
    .grove-headbar--mobile-menu-open .grove-headbar__secondary-row {
        display: block;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: var(--grove-bg-primary);
        border-bottom: 1px solid var(--grove-border-primary);
        box-shadow: var(--shadow-dropdown);
        z-index: var(--z-index-dropdown);
    }
    
    .grove-headbar--mobile-menu-open .grove-headbar__nav {
        flex-direction: column;
        align-items: stretch;
        gap: 0;
        padding: var(--space-2) 0;
    }
    
    .grove-headbar--mobile-menu-open .grove-headbar__nav-item {
        padding: var(--space-3) var(--space-4);
        border-bottom: none;
        border-left: 3px solid transparent;
        border-radius: var(--radius-base);
        margin: var(--space-1) var(--space-2);
    }
    
    .grove-headbar--mobile-menu-open .grove-headbar__nav-item:hover,
    .grove-headbar--mobile-menu-open .grove-headbar__nav-item--active {
        background-color: var(--grove-bg-secondary);
        border-left-color: var(--grove-brand-primary);
    }
}

@media (max-width: 480px) {
    .grove-headbar__primary-row {
        padding: var(--space-2);
    }
    
    .grove-headbar__breadcrumbs {
        font-size: var(--font-size-xs);
        gap: var(--space-1);
    }
    
    .grove-headbar__primary-logo img {
        height: var(--space-10);
        width: var(--space-10);
    }
}

/* Responsive primary/secondary row spacing */
@media (min-width: 640px) {
    .grove-headbar__primary-row,
    .grove-headbar__secondary-row {
        padding-left: var(--space-6);
        padding-right: var(--space-6);
    }
}

@media (min-width: 1024px) {
    .grove-headbar__primary-row,
    .grove-headbar__secondary-row {
        padding-left: var(--space-8);
        padding-right: var(--space-8);
    }
}

/* ===== ACCESSIBILITY IMPROVEMENTS ===== */

@media (prefers-contrast: high) {
    .grove-nav__link,
    .grove-breadcrumb__link,
    .grove-tabs__tab,
    .grove-menu__link,
    .grove-sidebar__nav-link,
    .grove-pagination__link {
        border-width: 2px;
    }
    
    .grove-nav__link--active,
    .grove-tabs__tab--active,
    .grove-menu__link--active,
    .grove-sidebar__nav-link--active {
        border: 2px solid currentColor;
    }
    
    .grove-headbar__primary-row {
        border-bottom-width: 2px;
    }
    
    .grove-headbar__secondary-row {
        border-bottom-width: 2px;
    }
    
    .grove-headbar__nav-item--active {
        border-bottom-width: 3px;
    }
}

@media (prefers-reduced-motion: reduce) {
    .grove-nav__link,
    .grove-breadcrumb__link,
    .grove-tabs__tab,
    .grove-menu__link,
    .grove-sidebar__nav-link,
    .grove-pagination__link,
    .grove-sidebar,
    .grove-headbar__nav-item,
    .grove-headbar__breadcrumb-char,
    .grove-headbar__breadcrumb-user,
    .grove-headbar__count-badge {
        transition-duration: 0.01ms;
    }
    
    .grove-headbar__count-badge.updating {
        animation: none !important;
    }
}

/* Focus indicators for accessibility */
.grove-headbar__nav-item:focus,
.grove-headbar__breadcrumb-char:focus,
.grove-headbar__breadcrumb-user:focus {
  outline: 2px solid var(--grove-brand-primary);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Screen reader support */
.grove-headbar__count-badge[aria-label="0"] {
  display: none;
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Use containment for better performance */
.grove-headbar {
  contain: layout style;
}

.grove-headbar__primary-row,
.grove-headbar__secondary-row {
  contain: layout;
}

/* Optimize transitions for 60fps performance */
.grove-headbar__nav-item,
.grove-headbar__breadcrumb-char,
.grove-headbar__breadcrumb-user,
.grove-headbar__count-badge {
  will-change: color, background-color, transform;
}

/* Remove will-change after transition completes */
.grove-headbar__nav-item:not(:hover),
.grove-headbar__breadcrumb-char:not(:hover),
.grove-headbar__breadcrumb-user:not(:hover),
.grove-headbar__count-badge:not(.updating) {
  will-change: auto;
}

/* ===== PRINT STYLES ===== */

@media print {
    .grove-headbar,
    .grove-mobile-nav {
        display: none !important;
    }
}

/* ===== INTEGRATION WITH GROVE DESIGN TOKENS ===== */

/* Ensure compatibility with Grove theme switching */
[data-theme="dark"] .grove-headbar,
.dark .grove-headbar {
    /* Dark theme is handled automatically via CSS custom properties */
}

/* Ensure compatibility with Darcula theme */
[data-theme="darcula"] .grove-headbar {
    --grove-bg-secondary: #3C3F41;
    --grove-bg-primary: #2B2B2B;
    --grove-text-primary: #A9B7C6;
    --grove-text-secondary: #808080;
    --grove-border-primary: #555555;
}