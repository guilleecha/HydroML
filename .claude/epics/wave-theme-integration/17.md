# Task #17: Layout Patterns and Template System

## Objective
Create standardized layout patterns and Django template architecture that provides consistent page structures, navigation patterns, and responsive layouts across all HydroML modules.

## Scope
Establish the template inheritance hierarchy and layout components that form the structural foundation for all pages, ensuring visual consistency and optimal user experience.

## Detailed Deliverables

### 1. Base Template Architecture
- **Base Template**: Root template with theme integration and global assets
- **Layout Templates**: Specialized layouts for different page types (dashboard, detail, form, list)
- **Partial Templates**: Reusable template fragments for common elements
- **Block Structure**: Consistent template blocks for content customization

### 2. Navigation Patterns
- **Primary Navigation**: Main application navigation with active state management
- **Breadcrumb System**: Contextual navigation showing page hierarchy
- **Sidebar Navigation**: Collapsible sidebar for section-specific navigation
- **Tab Navigation**: Component for organizing related content sections

### 3. Page Layout Templates
- **Dashboard Layout**: Grid-based layout for overview pages with widgets
- **Detail Layout**: Two-column layout for item detail pages
- **Form Layout**: Structured layout for data entry and editing forms
- **List Layout**: Table and card-based layouts for data listing pages
- **Settings Layout**: Multi-section layout for configuration pages

### 4. Responsive Grid System
- **Container Classes**: Responsive containers with consistent max-widths
- **Grid Components**: Flexible grid system using CSS Grid and Flexbox
- **Card Layouts**: Responsive card grids for modular content display
- **Breakpoint Management**: Consistent responsive behavior across layouts

## Acceptance Criteria

### Functional Requirements
- [ ] Complete template inheritance hierarchy established
- [ ] All layout patterns responsive across device sizes
- [ ] Navigation components work consistently across modules
- [ ] Template blocks provide sufficient customization points
- [ ] Layout patterns support both light and dark themes

### Quality Standards
- [ ] HTML semantic structure follows accessibility best practices
- [ ] Navigation patterns provide clear user orientation
- [ ] Layout templates are well-documented with usage examples
- [ ] Responsive breakpoints provide optimal experience on all devices
- [ ] Template performance optimized with minimal overhead

### Performance Criteria
- [ ] Template rendering adds <50ms to page load time
- [ ] Layout CSS adds <15KB to bundle size
- [ ] Navigation interactions respond within 100ms
- [ ] Responsive layouts perform smoothly during resize

## Technical Specifications

### Template Structure
```
templates/
├── base/
│   ├── base.html
│   ├── base_auth.html
│   └── base_error.html
├── layouts/
│   ├── dashboard.html
│   ├── detail.html
│   ├── form.html
│   ├── list.html
│   └── settings.html
├── partials/
│   ├── navigation/
│   │   ├── main_nav.html
│   │   ├── breadcrumbs.html
│   │   ├── sidebar.html
│   │   └── tabs.html
│   ├── components/
│   │   ├── header.html
│   │   ├── footer.html
│   │   └── theme_switcher.html
│   └── layout/
│       ├── grid.html
│       ├── cards.html
│       └── containers.html
```

### Layout Component Examples
```html
<!-- Dashboard Layout -->
{% extends "base/base.html" %}
{% block layout_class %}layout-dashboard{% endblock %}
{% block main_content %}
  <div class="dashboard-grid">
    {% block dashboard_widgets %}{% endblock %}
    {% block dashboard_sidebar %}{% endblock %}
  </div>
{% endblock %}

<!-- Detail Layout -->
{% extends "base/base.html" %}
{% block layout_class %}layout-detail{% endblock %}
{% block main_content %}
  <div class="detail-layout">
    <aside class="detail-sidebar">
      {% block detail_sidebar %}{% endblock %}
    </aside>
    <main class="detail-content">
      {% block detail_content %}{% endblock %}
    </main>
  </div>
{% endblock %}
```

### Navigation Integration
- **Context Processors**: Automatic navigation data injection
- **Active State Management**: Automatic highlighting of current page/section
- **Permission Integration**: Navigation items respect user permissions
- **Responsive Behavior**: Navigation adapts to mobile and tablet screens

### CSS Layout Classes
```css
/* Layout containers */
.layout-dashboard { /* Dashboard-specific styling */ }
.layout-detail { /* Detail page layout */ }
.layout-form { /* Form page structure */ }
.layout-list { /* List/table layouts */ }

/* Grid system */
.wave-grid { /* Flexible grid container */ }
.wave-grid-responsive { /* Responsive grid behavior */ }
.wave-card-grid { /* Card-based layouts */ }

/* Navigation */
.wave-nav-main { /* Primary navigation */ }
.wave-nav-sidebar { /* Sidebar navigation */ }
.wave-breadcrumbs { /* Breadcrumb navigation */ }
.wave-tabs { /* Tab navigation */ }
```

## Dependencies
- Django template system
- Design token system (Task #15)
- Component architecture (Task #16)
- CSS Grid and Flexbox browser support
- Responsive design breakpoints

## Integration Points
- Theme system for consistent styling
- Navigation context processors
- User permission system
- Static file management
- Component registration system

## Estimated Effort
**10-12 hours** over 3-4 days
- Template architecture design: 3 hours
- Layout template implementation: 4 hours
- Navigation component development: 3 hours
- Responsive design and testing: 2-3 hours
- Documentation and examples: 2 hours

## Definition of Done
- Complete template inheritance hierarchy implemented
- All layout patterns responsive and accessible
- Navigation components functional across modules
- Templates documented with clear usage examples
- Performance benchmarks met
- Cross-browser compatibility verified
- Integration with theme system complete