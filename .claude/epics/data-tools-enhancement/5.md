# Issue 5: Toolbar Grove Integration

## Issue Information
- **Issue ID**: 5
- **Epic**: data-tools-enhancement
- **Title**: Toolbar Grove Integration
- **Status**: Pending
- **Priority**: Medium
- **Assignee**: Claude Code
- **Created**: 2025-01-22
- **Estimated Effort**: 1 day

## Problem Description
Data Studio toolbar buttons and interface elements don't follow Grove design patterns, creating visual inconsistency with the enhanced headbar system and overall application design.

### Current Toolbar Issues
```javascript
// data_tools/static/data_tools/js/data_studio_sidebar.js
// Functions exist but UI doesn't match Grove patterns:
// - Basic HTML buttons without Grove styling
// - Inconsistent interaction patterns
// - Missing Grove component integration
// - No wave-theme alignment
```

### Grove Reference Patterns
```html
<!-- core/templates/core/grove_demo.html:86-107 -->
<div class="grove-project-actions flex items-center space-x-3">
    <a href="{% url 'core:component_demo' %}" 
       class="grove-btn grove-btn--secondary grove-btn--sm">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"></path>
        </svg>
        Base Components
    </a>
    <button class="grove-btn grove-btn--primary grove-btn--sm">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        New Component
    </button>
</div>
```

### WaveHeadbar Integration Patterns
```javascript
// core/static/core/js/components/wave/navigation/WaveHeadbar.js:125-133
<!-- Quick Actions Dropdown -->
<div class="relative">
    <button @click="quickActionsOpen = !quickActionsOpen" 
            class="flex items-center p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
    </button>
</div>
```

## Current Functionality Analysis

### âœ… Working Functionality (Keep)
```javascript
// data_tools/static/data_tools/js/data_studio_sidebar.js:92-394
// Session management functions
async initializeSession() { /* âœ… Working */ }
async stopSession() { /* âœ… Working */ }
async undoOperation() { /* âœ… Working */ }
async redoOperation() { /* âœ… Working */ }
async saveSession() { /* âœ… Working */ }

// Data operations
async runNaNAnalysis() { /* âœ… Working */ }
async performNaNCleaning() { /* âœ… Working */ }
async deleteSelectedColumns() { /* âœ… Working */ }

// Integrations
async openQuickChartsModal() { /* âœ… Working */ }
async openSQLModal() { /* âœ… Working */ }
toggleColumnPanel() { /* âœ… Working */ }
```

### ðŸŽ¨ Needs Grove Integration (Update UI Only)
- Button styling and icons
- Dropdown menus and modals
- Loading states and feedback
- Interaction animations

## Technical Solution

### 1. Grove Button System
```javascript
// NEW: Grove button generator for Data Studio
class DataStudioGroveUI {
    constructor() {
        this.buttonClasses = {
            primary: 'grove-btn grove-btn--primary grove-btn--sm',
            secondary: 'grove-btn grove-btn--secondary grove-btn--sm',
            ghost: 'grove-btn grove-btn--ghost grove-btn--sm',
            danger: 'grove-btn grove-btn--danger grove-btn--sm'
        };
        this.init();
    }
    
    init() {
        this.enhanceExistingButtons();
        this.createToolbarSections();
        this.setupDropdownMenus();
    }
    
    enhanceExistingButtons() {
        // Find existing buttons and enhance with Grove styling
        const buttons = document.querySelectorAll('.data-studio-sidebar button');
        buttons.forEach(button => this.enhanceButton(button));
    }
    
    enhanceButton(button) {
        const action = button.getAttribute('onclick') || button.id;
        const config = this.getButtonConfig(action);
        
        if (config) {
            button.className = config.class;
            button.innerHTML = this.getButtonHTML(config);
        }
    }
    
    getButtonConfig(action) {
        const configs = {
            'initializeSession': {
                class: this.buttonClasses.primary,
                icon: this.getPlayIcon(),
                text: 'Start Session',
                type: 'primary'
            },
            'stopSession': {
                class: this.buttonClasses.danger,
                icon: this.getStopIcon(),
                text: 'Stop Session',
                type: 'danger'
            },
            'undoOperation': {
                class: this.buttonClasses.secondary,
                icon: this.getUndoIcon(),
                text: 'Undo',
                type: 'secondary'
            },
            'redoOperation': {
                class: this.buttonClasses.secondary,
                icon: this.getRedoIcon(),
                text: 'Redo',
                type: 'secondary'
            },
            'saveSession': {
                class: this.buttonClasses.primary,
                icon: this.getSaveIcon(),
                text: 'Save',
                type: 'primary'
            },
            'runNaNAnalysis': {
                class: this.buttonClasses.secondary,
                icon: this.getAnalysisIcon(),
                text: 'Analyze NaN',
                type: 'secondary'
            },
            'openQuickChartsModal': {
                class: this.buttonClasses.secondary,
                icon: this.getChartIcon(),
                text: 'Quick Charts',
                type: 'secondary'
            },
            'openSQLModal': {
                class: this.buttonClasses.secondary,
                icon: this.getSQLIcon(),
                text: 'SQL Query',
                type: 'secondary'
            }
        };
        
        return configs[action] || null;
    }
    
    getButtonHTML(config) {
        return `
            ${config.icon}
            <span class="grove-btn-text">${config.text}</span>
        `;
    }
    
    createToolbarSections() {
        const sidebar = document.querySelector('.data-studio-sidebar');
        if (!sidebar) return;
        
        // Create organized toolbar sections
        const toolbarHTML = `
            <div class="grove-toolbar-sections">
                <!-- Session Control Section -->
                <div class="grove-toolbar-section">
                    <h4 class="grove-toolbar-section-title">Session Control</h4>
                    <div class="grove-toolbar-buttons">
                        <button onclick="window.dataStudioSidebar?.initializeSession()" 
                                class="${this.buttonClasses.primary}"
                                id="grove-start-session-btn">
                            ${this.getPlayIcon()}
                            <span>Start Session</span>
                        </button>
                        <button onclick="window.dataStudioSidebar?.stopSession()" 
                                class="${this.buttonClasses.danger}"
                                id="grove-stop-session-btn"
                                style="display: none;">
                            ${this.getStopIcon()}
                            <span>Stop Session</span>
                        </button>
                    </div>
                </div>
                
                <!-- Data Operations Section -->
                <div class="grove-toolbar-section">
                    <h4 class="grove-toolbar-section-title">Data Operations</h4>
                    <div class="grove-toolbar-buttons">
                        <button onclick="window.dataStudioSidebar?.undoOperation()" 
                                class="${this.buttonClasses.secondary}">
                            ${this.getUndoIcon()}
                            <span>Undo</span>
                        </button>
                        <button onclick="window.dataStudioSidebar?.redoOperation()" 
                                class="${this.buttonClasses.secondary}">
                            ${this.getRedoIcon()}
                            <span>Redo</span>
                        </button>
                        <button onclick="window.dataStudioSidebar?.saveSession()" 
                                class="${this.buttonClasses.primary}">
                            ${this.getSaveIcon()}
                            <span>Save</span>
                        </button>
                    </div>
                </div>
                
                <!-- Analysis Tools Section -->
                <div class="grove-toolbar-section">
                    <h4 class="grove-toolbar-section-title">Analysis Tools</h4>
                    <div class="grove-toolbar-buttons">
                        <button onclick="window.dataStudioSidebar?.runNaNAnalysis()" 
                                class="${this.buttonClasses.secondary}">
                            ${this.getAnalysisIcon()}
                            <span>NaN Analysis</span>
                        </button>
                        <button onclick="window.dataStudioSidebar?.openQuickChartsModal()" 
                                class="${this.buttonClasses.secondary}">
                            ${this.getChartIcon()}
                            <span>Quick Charts</span>
                        </button>
                        <button onclick="window.dataStudioSidebar?.openSQLModal()" 
                                class="${this.buttonClasses.secondary}">
                            ${this.getSQLIcon()}
                            <span>SQL Query</span>
                        </button>
                    </div>
                </div>
                
                <!-- Advanced Tools Dropdown -->
                <div class="grove-toolbar-section">
                    <h4 class="grove-toolbar-section-title">Advanced Tools</h4>
                    <div class="grove-dropdown" x-data="{ open: false }">
                        <button @click="open = !open" 
                                class="${this.buttonClasses.ghost} grove-dropdown-trigger">
                            ${this.getMoreIcon()}
                            <span>More Tools</span>
                            <svg class="w-4 h-4 ml-1 transform transition-transform" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div x-show="open" 
                             x-transition
                             @click.away="open = false"
                             class="grove-dropdown-menu">
                            <button onclick="window.dataStudioSidebar?.deleteSelectedColumns()" 
                                    class="grove-dropdown-item grove-dropdown-item--danger">
                                ${this.getDeleteIcon()}
                                <span>Delete Columns</span>
                            </button>
                            <button onclick="window.dataStudioSidebar?.toggleColumnPanel()" 
                                    class="grove-dropdown-item">
                                ${this.getColumnsIcon()}
                                <span>Column Panel</span>
                            </button>
                            <div class="grove-dropdown-divider"></div>
                            <button onclick="window.dataStudioSidebar?.exportData()" 
                                    class="grove-dropdown-item">
                                ${this.getExportIcon()}
                                <span>Export Data</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // Replace or enhance existing toolbar
        const existingToolbar = sidebar.querySelector('.existing-toolbar');
        if (existingToolbar) {
            existingToolbar.innerHTML = toolbarHTML;
        } else {
            const toolbarContainer = document.createElement('div');
            toolbarContainer.innerHTML = toolbarHTML;
            sidebar.appendChild(toolbarContainer);
        }
    }
    
    // Grove icon definitions (matching Grove demo patterns)
    getPlayIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V6a2 2 0 012-2z"></path>
        </svg>`;
    }
    
    getStopIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h6v4H9z"></path>
        </svg>`;
    }
    
    getUndoIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
        </svg>`;
    }
    
    getRedoIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"></path>
        </svg>`;
    }
    
    getSaveIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
        </svg>`;
    }
    
    getAnalysisIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>`;
    }
    
    getChartIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        </svg>`;
    }
    
    getSQLIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path>
        </svg>`;
    }
    
    getMoreIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
        </svg>`;
    }
    
    getDeleteIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>`;
    }
    
    getColumnsIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2"></path>
        </svg>`;
    }
    
    getExportIcon() {
        return `<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>`;
    }
}
```

### 2. Grove Toolbar Styling
```css
/* NEW: Grove toolbar styling in data-studio-base.css */
.grove-toolbar-sections {
    display: flex;
    flex-direction: column;
    gap: var(--grove-spacing-lg);
    padding: var(--grove-spacing-md);
}

.grove-toolbar-section {
    background: var(--grove-bg-surface);
    border: 1px solid var(--grove-border-color);
    border-radius: var(--grove-border-radius-lg);
    padding: var(--grove-spacing-md);
}

.grove-toolbar-section-title {
    font-size: var(--grove-text-sm);
    font-weight: var(--grove-font-semibold);
    color: var(--grove-text-primary);
    margin-bottom: var(--grove-spacing-md);
    padding-bottom: var(--grove-spacing-xs);
    border-bottom: 1px solid var(--grove-border-color);
}

.grove-toolbar-buttons {
    display: flex;
    flex-direction: column;
    gap: var(--grove-spacing-sm);
}

/* Grove Button System (matching grove-button.css) */
.grove-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--grove-spacing-sm) var(--grove-spacing-md);
    font-size: var(--grove-text-sm);
    font-weight: var(--grove-font-medium);
    border-radius: var(--grove-border-radius-md);
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    min-height: 2.5rem;
}

.grove-btn--primary {
    background: var(--grove-primary);
    color: var(--grove-primary-foreground);
    border-color: var(--grove-primary);
}

.grove-btn--primary:hover {
    background: var(--grove-primary-hover);
    border-color: var(--grove-primary-hover);
}

.grove-btn--secondary {
    background: var(--grove-bg-surface);
    color: var(--grove-text-primary);
    border-color: var(--grove-border-color);
}

.grove-btn--secondary:hover {
    background: var(--grove-bg-hover);
    border-color: var(--grove-border-hover);
}

.grove-btn--ghost {
    background: transparent;
    color: var(--grove-text-secondary);
    border-color: transparent;
}

.grove-btn--ghost:hover {
    background: var(--grove-bg-hover);
    color: var(--grove-text-primary);
}

.grove-btn--danger {
    background: var(--grove-red-600);
    color: white;
    border-color: var(--grove-red-600);
}

.grove-btn--danger:hover {
    background: var(--grove-red-700);
    border-color: var(--grove-red-700);
}

.grove-btn--sm {
    padding: var(--grove-spacing-xs) var(--grove-spacing-sm);
    font-size: var(--grove-text-xs);
    min-height: 2rem;
}

.grove-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.grove-btn svg {
    flex-shrink: 0;
}

/* Grove Dropdown System */
.grove-dropdown {
    position: relative;
}

.grove-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 50;
    margin-top: var(--grove-spacing-xs);
    background: var(--grove-bg-surface);
    border: 1px solid var(--grove-border-color);
    border-radius: var(--grove-border-radius-md);
    box-shadow: var(--grove-shadow-lg);
    overflow: hidden;
}

.grove-dropdown-item {
    display: flex;
    align-items: center;
    width: 100%;
    padding: var(--grove-spacing-sm) var(--grove-spacing-md);
    text-align: left;
    background: transparent;
    border: none;
    color: var(--grove-text-primary);
    font-size: var(--grove-text-sm);
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.grove-dropdown-item:hover {
    background: var(--grove-bg-hover);
}

.grove-dropdown-item--danger {
    color: var(--grove-red-600);
}

.grove-dropdown-item--danger:hover {
    background: var(--grove-red-50);
    color: var(--grove-red-700);
}

.grove-dropdown-divider {
    height: 1px;
    background: var(--grove-border-color);
    margin: var(--grove-spacing-xs) 0;
}

/* Responsive toolbar */
@media (max-width: 768px) {
    .grove-toolbar-sections {
        gap: var(--grove-spacing-md);
        padding: var(--grove-spacing-sm);
    }
    
    .grove-toolbar-section {
        padding: var(--grove-spacing-sm);
    }
    
    .grove-btn {
        font-size: var(--grove-text-xs);
        padding: var(--grove-spacing-xs) var(--grove-spacing-sm);
    }
}
```

## Implementation Steps

### Step 1: Create Grove UI Class
Add to `data_tools/static/data_tools/js/data_studio.js`:

```javascript
// Append DataStudioGroveUI class (implementation above)
```

### Step 2: Add Grove Toolbar Styling
Update `data_tools/static/data_tools/css/data-studio-base.css`:

```css
/* Add Grove toolbar styling (implementation above) */
```

### Step 3: Initialize Grove UI System
Update `data_tools/static/data_tools/js/data_studio_sidebar.js`:

```javascript
// Enhanced initialization
init() {
    this.initDropdowns();
    this.updateStats();
    this.bindEvents();
    this.updateSessionStatus();
    
    // Initialize Grove UI system
    if (window.DataStudioGroveUI) {
        this.groveUI = new DataStudioGroveUI();
    }
    
    // Update stats and session status periodically
    setInterval(() => {
        this.updateStats();
        this.updateSessionStatus();
    }, 3000);
}

// Enhanced session UI updates to work with Grove buttons
updateSessionUI(sessionExists, sessionData = {}) {
    const dot = document.getElementById('session-status-dot');
    const label = document.getElementById('session-status-label');
    const stopBtn = document.getElementById('grove-stop-session-btn') || document.getElementById('stop-session-btn');
    const startBtn = document.getElementById('grove-start-session-btn');
    
    this.sessionActive = sessionExists;
    
    if (sessionExists) {
        if (dot) dot.className = 'w-2 h-2 rounded-full bg-green-500';
        if (label) label.textContent = 'Session Active';
        if (stopBtn) {
            stopBtn.style.display = 'inline-flex';
            stopBtn.classList.remove('hidden');
        }
        if (startBtn) {
            startBtn.style.display = 'none';
        }
    } else {
        if (dot) dot.className = 'w-2 h-2 rounded-full bg-gray-400';
        if (label) label.textContent = 'No session';
        if (stopBtn) {
            stopBtn.style.display = 'none';
            stopBtn.classList.add('hidden');
        }
        if (startBtn) {
            startBtn.style.display = 'inline-flex';
        }
    }
}
```

### Step 4: Template Integration
Update `data_tools/templates/data_tools/data_studio.html`:

```html
{% block extra_css %}
<link rel="stylesheet" href="{% static 'data_tools/css/data-studio-layout.css' %}">
<link rel="stylesheet" href="{% static 'data_tools/css/data-studio-base.css' %}">
{% endblock %}

{% block extra_js %}
<!-- Existing scripts -->
<script src="{% static 'data_tools/js/data_studio_session_manager.js' %}"></script>
<script src="{% static 'data_tools/js/data_studio_filters.js' %}"></script>
<script src="{% static 'data_tools/js/data_studio.js' %}"></script>
<script src="{% static 'data_tools/js/data_studio_ui_utils.js' %}"></script>
<script src="{% static 'data_tools/js/data_studio_api.js' %}"></script>
<script src="{% static 'data_tools/js/data_studio_sidebar.js' %}"></script>
<script src="{% static 'data_tools/js/export_components.js' %}"></script>

<!-- Initialize Grove UI after all components loaded -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Grove UI after other components
    setTimeout(() => {
        if (window.DataStudioGroveUI && window.dataStudioSidebar) {
            window.dataStudioSidebar.groveUI = new DataStudioGroveUI();
        }
    }, 100);
});
</script>
{% endblock %}
```

## Files Modified

### Primary Files
1. **data_tools/static/data_tools/js/data_studio.js**
   - Add DataStudioGroveUI class
   - Implement Grove button system
   - Create organized toolbar sections

2. **data_tools/static/data_tools/css/data-studio-base.css**
   - Grove button styling system
   - Toolbar section layouts
   - Dropdown menu styling

3. **data_tools/static/data_tools/js/data_studio_sidebar.js**
   - Enhanced Grove UI initialization
   - Updated session UI management
   - Integration with Grove button system

4. **data_tools/templates/data_tools/data_studio.html**
   - Include Grove CSS files
   - Initialize Grove UI system

## Testing Requirements

### Visual Testing
- [ ] All buttons match Grove design patterns
- [ ] Toolbar sections properly organized
- [ ] Dropdown menus work correctly
- [ ] Icons display consistently

### Functionality Testing
- [ ] All existing functions still work
- [ ] Session management buttons respond
- [ ] Dropdown actions execute properly
- [ ] Loading states display correctly

### Integration Testing
- [ ] No conflicts with existing JavaScript
- [ ] Theme switching affects buttons
- [ ] Responsive layout works on mobile
- [ ] Performance impact minimal

## Acceptance Criteria
- [ ] 100% Grove design pattern compliance
- [ ] All existing functionality preserved
- [ ] Organized toolbar with logical sections
- [ ] Consistent button styling and icons
- [ ] Responsive design across devices
- [ ] Smooth interactions and transitions

## Performance Considerations
- Lazy initialization of UI enhancements
- Efficient DOM manipulation
- CSS transitions over JavaScript animations
- Minimal impact on existing functionality

## Dependencies
- Issue 2: Sidebar Margins Evaluation (affects toolbar positioning)
- Issue 4: Metrics and Icons Integration (shared icon system)
- Grove design tokens and button components

## Related Issues
- Issue 2: Sidebar Margins Evaluation (toolbar spacing)
- Issue 4: Metrics and Icons Integration (icon consistency)
- Issue 6: CSS Architecture Modernization (shares styling system)