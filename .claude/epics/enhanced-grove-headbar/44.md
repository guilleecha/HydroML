# Task #5: Build Universal Search with Character Prefixes

**Epic**: Enhanced Grove Headbar  
**Phase**: Component Enhancement  
**Estimated Effort**: 8-10 hours  
**Dependencies**: Task #4  

## Objective
Implement the universal search system with character-prefixed filtering, real-time suggestions, and intelligent content discovery for the Grove headbar.

## Scope
- Create character-prefixed search functionality (@, #, &, ~)
- Implement real-time search suggestions with grouped results
- Build backend API endpoints for search data
- Design search result dropdown interface with keyboard navigation

## Deliverables
- [ ] Universal search component with prefix detection
- [ ] Backend search API endpoints for each content type
- [ ] Real-time suggestion dropdown with grouped results
- [ ] Keyboard navigation and accessibility features

## Technical Details
### Search Prefix System
```javascript
// Search prefix detection and routing
searchPrefixes: {
    '@': { type: 'users', endpoint: '/api/search/users/', placeholder: 'Search users...' },
    '~': { type: 'workspaces', endpoint: '/api/search/workspaces/', placeholder: 'Search workspaces...' },
    '#': { type: 'experiments', endpoint: '/api/search/experiments/', placeholder: 'Search experiments...' },
    '&': { type: 'databases', endpoint: '/api/search/databases/', placeholder: 'Search databases...' },
    'global': { type: 'all', endpoint: '/api/search/global/', placeholder: 'Search everything...' }
}
```

### Backend API Endpoints
- `GET /api/search/users/?q=guer` → User search results
- `GET /api/search/workspaces/?q=hydro` → Workspace search results
- `GET /api/search/experiments/?q=train` → Experiment search results
- `GET /api/search/databases/?q=post` → Database search results
- `GET /api/search/global/?q=analytics` → Global search across all types

### Search Result Structure
```json
{
    "results": [
        {
            "type": "user",
            "id": "123",
            "title": "@guillermo",
            "subtitle": "Full Name",
            "url": "/users/123/",
            "icon": "user"
        }
    ],
    "total": 5,
    "query": "guer"
}
```

### Dropdown Interface Features
- Grouped results by content type
- Keyboard navigation (up/down arrows, enter to select)
- Highlight search term matches
- Recent searches memory
- Quick action shortcuts

## Acceptance Criteria
- [ ] Search detects character prefixes and routes to appropriate endpoints
- [ ] Real-time suggestions appear within 200ms of typing
- [ ] Dropdown results are grouped by content type with clear headers
- [ ] Keyboard navigation works properly (arrows, enter, escape)
- [ ] Search results link to appropriate detail pages
- [ ] Global search (no prefix) searches across all content types
- [ ] Mobile-responsive search interface

## Implementation Notes
- Implement debouncing to avoid excessive API calls
- Use proper escaping for search query parameters
- Consider implementing search result caching for common queries
- Ensure search API endpoints have proper authentication and authorization
- Test search performance with large datasets
- Implement proper error handling for search API failures