# Task #8: Optimize CSS for Two-Row Layout Support

**Epic**: Enhanced Grove Headbar  
**Phase**: Grove Demo Integration  
**Estimated Effort**: 4-6 hours  
**Dependencies**: Task #7  

## Objective
Enhance the existing `grove-headbar.css` stylesheet to properly support the two-row layout architecture while maintaining backward compatibility and performance optimization.

## Scope
- Extend grove-headbar.css with two-row layout styles
- Optimize CSS for performance and maintainability
- Ensure cross-browser compatibility
- Implement responsive design patterns for mobile devices

## Deliverables
- [ ] Enhanced grove-headbar.css with two-row support
- [ ] Responsive design styles for mobile adaptation
- [ ] Performance-optimized CSS structure
- [ ] Cross-browser compatibility verification

## Technical Details
### Two-Row Layout Styles
```css
/* Two-row headbar container */
.wave-headbar.two-row {
    display: flex;
    flex-direction: column;
    position: sticky;
    top: 0;
    z-index: 50;
}

/* Primary row (breadcrumbs) */
.wave-headbar-primary-row {
    background-color: var(--grove-bg-secondary, #f3f4f6);
    border-bottom: 1px solid var(--grove-border);
    padding: 0.5rem 1rem;
    min-height: 3rem;
}

/* Secondary row (navigation) */
.wave-headbar-secondary-row {
    background-color: var(--grove-bg-primary);
    border-bottom: 1px solid var(--grove-border);
    padding: 0;
    min-height: 3rem;
}

/* Breadcrumb navigation styles */
.wave-headbar-breadcrumbs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.wave-headbar-breadcrumb-char {
    color: var(--grove-accent);
    font-weight: 600;
    text-decoration: none;
    transition: opacity 0.2s ease;
}

.wave-headbar-breadcrumb-char:hover {
    opacity: 0.7;
}
```

### Count Badge Enhancements
```css
/* Enhanced count badge styles */
.wave-headbar-count-badge {
    background-color: var(--grove-text-secondary);
    color: white;
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    margin-left: 0.5rem;
    transition: all 0.2s ease;
    min-width: 1.25rem;
    text-align: center;
}

.wave-headbar-count-badge.updating {
    opacity: 0.6;
    transform: scale(0.95);
}

.wave-headbar-count-badge.zero {
    display: none;
}
```

### Mobile Responsive Design
```css
/* Mobile adaptations */
@media (max-width: 768px) {
    .wave-headbar-primary-row {
        padding: 0.25rem 1rem;
        min-height: 2.5rem;
    }
    
    .wave-headbar-secondary-row {
        display: none; /* Hide secondary row on mobile */
    }
    
    .wave-headbar.two-row.mobile-menu-open .wave-headbar-secondary-row {
        display: block;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--grove-bg-primary);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
}
```

### Performance Optimizations
- Use CSS custom properties for theming
- Minimize layout thrashing with transform animations
- Implement will-change hints for animated elements
- Optimize selector specificity for faster rendering

## Acceptance Criteria
- [ ] Two-row layout renders correctly in all supported browsers
- [ ] CSS maintains Grove design token consistency
- [ ] Mobile responsive design works on devices 320px width and up
- [ ] Animation performance maintains 60fps during interactions
- [ ] CSS bundle size increase is minimal (<5KB)
- [ ] No visual regressions in existing single-row implementations
- [ ] Dark mode support works properly for both rows

## Implementation Notes
- Test CSS changes across Chrome, Firefox, Safari, and Edge
- Use CSS containment properties for performance optimization
- Implement proper focus indicators for accessibility
- Consider using CSS Grid for complex layout scenarios
- Document any new CSS custom properties for team reference
- Run CSS through autoprefixer for cross-browser compatibility